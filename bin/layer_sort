#!/usr/bin/env ruby
# frozen_string_literal: true

#
# Sort the binary records generated by the layer_build step. This approach is
# based on http://serverfault.com/questions/402920/sorting-large-binary-files
#
# Usage example:
# bin/layer_sort data/layer_states/board_size-3.*/*.bin
#

require_relative '../lib/twenty48'
include Twenty48

ARGV.each do |input_file|
  input_size = File.stat(input_file).size
  puts "Sorting #{input_file} (#{input_size}B)"
  NativeLayerBuilder.sort_layer(input_file)
end
